---
layout: post
title: Adding Atlas Toolkit Extenders to dasBlog Themes
date: 2006-09-24 00:57:13.000000000 -04:00
categories:
- dasBlog
tags:
- ASP.NET AJAX
status: publish
type: post
published: true
meta:
  pvc_views: '905'
  dsq_thread_id: '558512915'
author:
  login: kyle6994
  email: kyle@baley.org
  display_name: Kyle Baley
  first_name: ''
  last_name: ''
---
<p>So now that <a href="http://www.dasblog.info">DasBlog</a>&nbsp;was all <a href="http://kyle.baley.org/AtlasAndDasBlog19TheBetterWay.aspx">set up for Atlas</a>, complete with ScriptManager, the next step was to add a couple of controls from the <a href="http://atlas.asp.net/default.aspx?tabid=47&amp;subtabid=477">Atlas Control Toolkit</a>. Specifically, I'm using a TextBoxWatermark in the search box and RoundedCorner and CollapsiblePanel controls for each of the funky brown blobs you see to the right.</p>
<p>In the first iteration, I had opened up each of these controls individually and had myself a little hootenanny in each one. I created a bunch of panels and images programmatically within the Render method as well as CollapsiblePanel and RoundedCorners controls attached to these panels. At some point, I found it necessary even to move all of that code out of the Render method and into CreateChildControls (where I believe it belongs; what if I want to handle events by any of the constituent controls?). Can't remember why I needed it, probably for the calendar which required me to create a whole brand now control specifically so I could wrap it in a bunch of Panels to house the heading and dropdown image.</p>
<p>The end result, as I alluded to in a post from many moons ago, was FrankenBlog. A blog only a mother could love (but not my mother). The controls were so&nbsp;intrinsically tailored to the CodingHillbilly theme, the code was nigh unreleasable to the general public, lest the coding Hillbilly be scoffed for reasons other than his penchant for plaid. (On a side note...does anyone even know what 'intrinsically' means?)</p>
<p>But I's a smart&nbsp;bumpkin and I knew others might like to know how to do this themselves. And I sure wasn't about to release that code. It was, to continue the Frankenstein theme, abby-normal.</p>
<p>Anyway, enough pre-amble. Here is the HTML for my Links box:</p>
<p><font color="#0000ff" size="2"></p>
<p>&lt;</p>
<p></font><font color="#800000" size="2">div</font><font color="#0000ff" size="2"> </font><font color="#ff0000" size="2">id</font><font color="#0000ff" size="2">=</font><font color="#000000" size="2">"</font><font color="#0000ff" size="2">navLinksDiv</font><font color="#000000" size="2">"</font><font color="#0000ff" size="2">&gt;<br />&nbsp;&nbsp; &lt;</font><font color="#800000" size="2">div</font><font color="#0000ff" size="2"> </font><font color="#ff0000" size="2">class</font><font color="#0000ff" size="2">=</font><font color="#000000" size="2">"</font><font color="#0000ff" size="2">navHeader</font><font color="#000000" size="2">"</font><font color="#0000ff" size="2"> </font><font color="#ff0000" size="2">id</font><font color="#0000ff" size="2">=</font><font color="#000000" size="2">"</font><font color="#0000ff" size="2">navLinksHeader</font><font color="#000000" size="2">"</font><font color="#0000ff" size="2">&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;</font><font color="#800000" size="2">div</font><font color="#0000ff" size="2"> </font><font color="#ff0000" size="2">style</font><font color="#0000ff" size="2">=</font><font color="#000000" size="2">"</font><font color="#0000ff" size="2">float:left;</font><font color="#000000" size="2">"</font><font color="#0000ff" size="2">&gt;</font><font color="#000000" size="2">Links</font><font color="#0000ff" size="2">&lt;/</font><font color="#800000" size="2">div</font><font color="#0000ff" size="2">&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;</font><font color="#800000" size="2">div</font><font color="#0000ff" size="2"> </font><font color="#ff0000" size="2">style</font><font color="#0000ff" size="2">=</font><font color="#000000" size="2">"</font><font color="#0000ff" size="2">float:right;</font><font color="#000000" size="2">"</font><font color="#0000ff" size="2">&gt;&lt;</font><font color="#800000" size="2">img</font><font color="#0000ff" size="2"> </font><font color="#ff0000" size="2">id</font><font color="#0000ff" size="2">=</font><font color="#000000" size="2">"</font><font color="#0000ff" size="2">navLinksImage</font><font color="#000000" size="2">"</font><font color="#0000ff" size="2"> </font><font color="#ff0000" size="2">style</font><font color="#0000ff" size="2">=</font><font color="#000000" size="2">"</font><font color="#0000ff" size="2">cursor:hand;</font><font color="#000000" size="2">"</font><font color="#0000ff" size="2"> </font><font color="#ff0000" size="2">src</font><font color="#0000ff" size="2">=</font><font color="#000000" size="2">'</font><font color="#0000ff" size="2">&lt;</font><font color="#000000" size="2">%</font><font color="#ff0000" size="2">radio.macros.imageurl</font><font color="#000000" size="2">(</font><font color="#0000ff" size="2"> </font><font color="#000000" size="2">"</font><font color="#0000ff" size="2">webpart-up.gif</font><font color="#000000" size="2">"</font><font color="#0000ff" size="2"> </font><font color="#000000" size="2">)%</font><font color="#0000ff" size="2">&gt;</font><font color="#000000" size="2">' /&gt;</font><font color="#0000ff" size="2">&lt;/</font><font color="#800000" size="2">div</font><font color="#0000ff" size="2">&gt;<br />&nbsp;&nbsp; &lt;/</font><font color="#800000" size="2">div</font><font color="#0000ff" size="2">&gt;<br />&nbsp;&nbsp; &lt;</font><font color="#800000" size="2">div</font><font color="#0000ff" size="2"> </font><font color="#ff0000" size="2">id</font><font color="#0000ff" size="2">=</font><font color="#000000" size="2">"</font><font color="#0000ff" size="2">navLinksContent</font><font color="#000000" size="2">"</font><font color="#0000ff" size="2">&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;</font><font color="#000000" size="2">%</font><font color="#800000" size="2">navigatorLinks</font><font color="#000000" size="2">%</font><font color="#0000ff" size="2">&gt;<br />&nbsp;&nbsp; &lt;/</font><font color="#800000" size="2">div</font><font color="#0000ff" size="2">&gt;<br />&lt;/</font><font color="#800000" size="2">div</font><font color="#0000ff" size="2">&gt;</font></p>
<p>Pretty standard HTML and it nicely highlights my disdain for using tables for layout.</p>
<p>And herein lies one of the many Good Things<sup>Â©</sup> about the toolkit extenders. They extend. As in you write your HTML like you normally would and apply whatever extenders you want to them.</p>
<p>One issue though is that all the toolkit samples show the extenders being applied to server-side controls. And they show the extenders as server-side controls themselves. But they don't need to be. The extenders can be applied client-side to regular HTML controls.</p>
<p>The following javascript will add a RoundedCorners extender to the navLinksDiv div above:</p>
<p><span style="FONT-SIZE: 11px; COLOR: black; FONT-FAMILY: Courier New; BACKGROUND-COLOR: transparent"><span style="FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Courier New; BACKGROUND-COLOR: transparent">var</span> roundedCorners <span style="FONT-SIZE: 11px; COLOR: red; FONT-FAMILY: Courier New; BACKGROUND-COLOR: transparent">=</span> <span style="FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Courier New; BACKGROUND-COLOR: transparent">new</span> AtlasControlToolkit.RoundedCornersBehavior( );<br />roundedCorners.set_Color( "#706861" );<br />roundedCorners.set_Radius( 10 );</p>
<p><span style="FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Courier New; BACKGROUND-COLOR: transparent">var</span> theDiv <span style="FONT-SIZE: 11px; COLOR: red; FONT-FAMILY: Courier New; BACKGROUND-COLOR: transparent">=</span> <span style="FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Courier New; BACKGROUND-COLOR: transparent">new</span> Sys.UI.Control( $("navLinksDiv") );<br />theDiv.get_behaviors( ).add( roundedCorners );<br />roundedCorners.initialize( );</span></p>
<p><span style="FONT-SIZE: 11px; COLOR: black; FONT-FAMILY: Courier New; BACKGROUND-COLOR: transparent"><font face="Verdana" color="#003300" size="2">It looks a little funky but yes, it's javascript. Atlas has abstracted a bunch of things and added an object model that I REALLY hope gets better documentation before release time. Hillbillies get cranky when there ain't no intelly-sense.</font></span></p>
<p><span style="FONT-SIZE: 11px; COLOR: black; FONT-FAMILY: Courier New; BACKGROUND-COLOR: transparent"><font face="Verdana" color="#003300" size="2">So we create a RoundedCornersBehavior object and set some properties on it. Then we create a Sys.UI.Control object which is, I think, a generic Atlas control. There are more specific ones but they correspond to actual form elements like textboxes and dropdown lists. In this case, we're applying it to a div, so we create a Sys.UI.Control.</font></span></p>
<p><span style="FONT-SIZE: 11px; COLOR: black; FONT-FAMILY: Courier New; BACKGROUND-COLOR: transparent"><font face="Verdana" color="#003300" size="2">Note that we pass in the ID of the DIV in the constructor (if I recall, the $ notation is Atlas-shorthand for document.getElementById but don't quote me). This was a little weird for me because now we've essentially got this Sys.UI.Control object that's bound somehow to the navLinksDiv HTML element. And in the next line, we call this method on it that attaches the roundedCorners behavior to it. And somehow this all filters back to the original HTML element, which hasn't really been touched.</font></span></p>
<p><span style="FONT-SIZE: 11px; COLOR: black; FONT-FAMILY: Courier New; BACKGROUND-COLOR: transparent"><font face="Verdana" color="#003300" size="2">Obviously, this code doesn't work out of the box. You need appropriate javascript references. The ScriptManager handles the base Atlas script references for things like the controls in the Sys.UI namespace. For the RoundedCornersBehavior object, you need to include a reference to the RoundedCornersBehavior.js file that is included in the AtlasControlToolkit source code:</font></span></p>
<p><span style="FONT-SIZE: 11px; COLOR: black; FONT-FAMILY: Courier New; BACKGROUND-COLOR: transparent"><font face="Verdana" color="#003300" size="2"><font color="#0000ff" size="2"><font color="#0000ff" size="2"></p>
<p>&lt;</p>
<p></font><font color="#800000" size="2">script</font><font color="#0000ff" size="2"> </font><font color="#ff0000" size="2">language</font><font color="#0000ff" size="2">=</font><font color="#000000" size="2">"</font><font color="#0000ff" size="2">javascript</font><font color="#000000" size="2">"</font><font color="#0000ff" size="2"> </font><font color="#ff0000" size="2">type</font><font color="#0000ff" size="2">=</font><font color="#000000" size="2">"</font><font color="#0000ff" size="2">text/javascript</font><font color="#000000" size="2">"</font><font color="#0000ff" size="2"> </font><font color="#ff0000" size="2">src</font><font color="#0000ff" size="2">=</font><font color="#000000" size="2">"</font><font color="#0000ff" size="2">themes/CodingHillbilly/ExtenderScripts/AtlasControlExtender.js</font><font color="#000000" size="2">"</font><font color="#0000ff" size="2">&gt;&lt;/</font><font color="#800000" size="2">script</font><font color="#0000ff" size="2">&gt;<br /></font>&lt;</font><font color="#800000" size="2">script</font><font color="#0000ff" size="2"> </font><font color="#ff0000" size="2">language</font><font color="#0000ff" size="2">=</font><font color="#000000" size="2">"</font><font color="#0000ff" size="2">javascript</font><font color="#000000" size="2">"</font><font color="#0000ff" size="2"> </font><font color="#ff0000" size="2">type</font><font color="#0000ff" size="2">=</font><font color="#000000" size="2">"</font><font color="#0000ff" size="2">text/javascript</font><font color="#000000" size="2">"</font><font color="#0000ff" size="2"> </font><font color="#ff0000" size="2">src</font><font color="#0000ff" size="2">=</font><font color="#000000" size="2">"</font><font color="#0000ff" size="2">themes/CodingHillbilly/ExtenderScripts/RoundedCornersBehavior.js</font><font color="#000000" size="2">"</font><font color="#0000ff" size="2">&gt;&lt;/</font><font color="#800000" size="2">script</font><font color="#0000ff" size="2">&gt;</font></font></span></p>
<p><span style="FONT-SIZE: 11px; COLOR: black; FONT-FAMILY: Courier New; BACKGROUND-COLOR: transparent"><font face="Verdana" color="#003300" size="2">If you are using the server-side controls, this reference isn't necessary because the control itself handles the references for you using WebResource.axd, which I understand not at all. As you can see here, I've copied the .js file into my theme folder for easy reference. And the reference to AtlasControlExtender.js I gather is necessary if you're going to do any client-side extender work. All I know is that it didn't work when I just had RoundedCornersBehavior.js references and it did after I added AtlasControlExtender.js.</font></span></p>
<p><span style="FONT-SIZE: 11px; COLOR: black; FONT-FAMILY: Courier New; BACKGROUND-COLOR: transparent"><font face="Verdana" color="#003300" size="2">I'll wrap it up by saying the entire theme is attached. homeTemplate.blogTemplate is where all the action is. (Apologies in advanced on the formatting. For whatever reason, I slugged it out with Visual Studio as my editor and&nbsp;it kept&nbsp;wanting to reformat everything in that annoyingly helpful, Steve Urkel-like way.)&nbsp;There are a couple of other little things like the fact that Atlas will always call the pageLoad javascript function if it is defined and that the AtlasUIGlitz.js function is needed to make the animation in the CollapsiblePanel work. Hopefully the comments are clear.</font></span></p>
<p><span style="FONT-SIZE: 11px; COLOR: black; FONT-FAMILY: Courier New; BACKGROUND-COLOR: transparent"><font face="Verdana" color="#003300" size="2">The end result is: It is possible to use the Atlas Control Toolkit within your themes without having to muck around (much) with the codebase. On reflection, this whole post could have been laid out better had I known I would go into full "how to" mode. If anything is unclear, gimme a holler.</font></span></p>
<p><span style="FONT-SIZE: 11px; COLOR: black; FONT-FAMILY: Courier New; BACKGROUND-COLOR: transparent"><font face="Verdana" color="#003300" size="2">And finally, sweet Jayzus am I ever getting tired of correcting myself when my fingers inevitably type "behaviour".</font></span></p>
<p><a href="http://kyle.baley.org/content/binary/CodingHillbilly.zip">CodingHillbilly.zip (64.56 KB)</a></p>
